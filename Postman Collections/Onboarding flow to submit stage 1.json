{
	"info": {
		"_postman_id": "9a7e356a-42fe-40ae-9178-bdc82b19e789",
		"name": "Onboarding flow to submit stage 1",
		"description": "Requests marked * require a file to be uploaded",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Onboarding Complete",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "3aa4d965-5eb1-40da-8538-f4dc5d41943d",
						"exec": [
							"let leadId = pm.response.json().leadId;",
							"pm.variables.set(\"leadId\", leadId);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"thirdPartyCustomerId\": \"7654321\",\r\n  \"thirdPartyLeadId\": \"1231231\",\r\n  \"countryISOCode\": \"GBR\",\r\n  \"loanCurrencyISOCode\": \"GBP\",\r\n  \"monthlyCardRevenue\": 1000,\r\n  \"numberOfPaymentsPerMonth\": 150,\r\n  \"sweepPercentage\": 15,\r\n  \"monthsTrading\": 14,\r\n  \"loanAmount\": 5500,\r\n  \"keyContactName\": \"Jacobo\",\r\n  \"companyType\": \"ltd\",\r\n  \"companyName\": \"testcompany\",\r\n  \"companyWebsite\": \"acme.com\",\r\n  \"companyNumber\": \"123456\",\r\n  \"formationDate\": \"\",\r\n  \"companyDescription\": \"Description!\",\r\n  \"vatNumber\": \"1234567\",\r\n  \"mid\": \"1234567\",\r\n  \"registeredAddress\": {\r\n    \"line1\": \"53 A Street\",\r\n    \"line2\": \"Here\",\r\n    \"line3\": \"There\",\r\n    \"city\": \"Every\",\r\n    \"region\": \"Where\",\r\n    \"areaCode\": \"HB1 1BH\",\r\n    \"country\": \"UK\"\r\n  },\r\n  \"contactPhoneNumber\": \"440123456789\",\r\n  \"contactEmailAddress\": \"jacobopineiro@acme.com\",\r\n  \"notificationURL\": \"www.abc.com\",\r\n  \"additionalInfo\": {\r\n    \"additionalProp1\": \"This\",\r\n    \"additionalProp2\": \"That\",\r\n    \"additionalProp3\": \"Other\"\r\n  }\r\n}",
					"options": {
						"raw": {}
					}
				},
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get lead details",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "33d6d00d-4122-4e3f-9b81-6b2d19d29caf",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "1b637699-6e87-41d7-940e-95007da5b053",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/details",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"details"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get organisation details",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "772e56ab-3aca-4b80-b273-1ccaba397f19",
						"exec": [
							"\r",
							"\r",
							"    \r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/organisationdetails",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"organisationdetails"
					]
				}
			},
			"response": []
		},
		{
			"name": "Add organisation details",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "a343e571-c63c-4ec7-9f29-1a545b95b280",
						"exec": [
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"companyName\": \"emca\",\r\n  \"companyNumber\": \"1234567\",\r\n  \"vatNumber\": \"1234567\",\r\n  \"companyType\": \"ltd\",\r\n  \"registeredAddress\": {\r\n    \"line1\": \"A Street\",\r\n    \"line2\": \"Here\",\r\n    \"line3\": \"There\",\r\n    \"city\": \"Every\",\r\n    \"region\": \"Where\",\r\n    \"areaCode\": \"HB1 1BH\",\r\n    \"country\": \"UK\"\r\n  },\r\n  \"country\": \"unitedKingdom\",\r\n  \"formationDate\": \"2000-11-28T16:47:21.880Z\",\r\n  \"keyContactName\": \"JP\",\r\n  \"contactPhoneNumber\": \"440123456789\",\r\n  \"contactEmailAddress\": \"bobbby@acme.com\",\r\n  \"companyWebsite\": \"acme.com\",\r\n  \"description\": \"Description!\",\r\n  \"industries\": [\r\n    {\r\n      \"code\": \"01110\",\r\n      \"description\": \"Growing of cereals (except rice), leguminous crops and oil seeds\"\r\n    }\r\n  ],\r\n  \"confirmedCreditSearch\": true\r\n}\r\n",
					"options": {}
				},
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/organisationdetails",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"organisationdetails"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get organisation details Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "772e56ab-3aca-4b80-b273-1ccaba397f19",
						"exec": [
							"\r",
							"\r",
							"    \r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/organisationdetails",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"organisationdetails"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get KYC documents",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "79951db6-01b8-4263-80cc-c6d2c7a4216d",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/documents",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"documents"
					]
				}
			},
			"response": []
		},
		{
			"name": "Significant Persons Complete",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "71c02fbc-3460-4a2a-94da-b5e0f526f065",
						"exec": [
							"   ",
							"let response = pm.response.json();",
							"let significantPersonId = response.significantPersonIds[0];",
							"pm.variables.set(\"significantPersonId\", significantPersonId);"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "fc1a56d1-c820-4401-9528-9bc532abebc9",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"significantPersons\": [\n        {\n            \"firstName\": \"Jacobo\",\n            \"surname\": \"Pi√±eiro\",\n            \"typeOfPerson\": \"director\",\n            \"address\": {\n                \"line1\": \"1 High Street\",\n                \"line2\": \"Victoria\",\n                \"line3\": \"Greater\",\n                \"city\": \"London\",\n                \"region\": \"SE England\",\n                \"areaCode\": \"SW19 2EJ\",\n                \"country\": \"UK\"\n            },\n            \"dateOfBirth\": {\n                \"year\": 1990,\n                \"month\": 10,\n                \"day\": 10\n            },\n            \"percentageOwned\": 40,\n            \"emailAddress\": \"jacobo.pineiro@youlend.com\",\n            \"mobilePhoneNumber\": \"+447380667163\",\n            \"nationality\": \"Spanish\",\n            \"niNumber\": \"HH673776R\"\n        }\n    ]\n}",
					"options": {
						"raw": {}
					}
				},
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/significantpersons",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"significantpersons"
					]
				}
			},
			"response": []
		},
		{
			"name": "Significant person KYC  Proof of Identity*",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "26298484-a2ba-4b28-a676-1837ff245cd4",
						"exec": [
							"  "
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/x-www-form-urlencoded",
						"type": "text"
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "file",
							"type": "file",
							"src": []
						}
					],
					"options": {}
				},
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/documents/significantpersons/{{significantPersonId}}/proofOfIdentity",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"documents",
						"significantpersons",
						"{{significantPersonId}}",
						"proofOfIdentity"
					]
				}
			},
			"response": []
		},
		{
			"name": "Significant person KYC Proof of Address*",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "26298484-a2ba-4b28-a676-1837ff245cd4",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "file",
							"type": "file",
							"src": []
						}
					],
					"options": {}
				},
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/documents/significantpersons/{{significantPersonId}}/proofOfAddress",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"documents",
						"significantpersons",
						"{{significantPersonId}}",
						"proofOfAddress"
					]
				}
			},
			"response": []
		},
		{
			"name": "KYC Bank Statement*",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "a16f7bce-1cca-4d2a-bcd8-4ca7599c0668",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "multipart/form-data",
						"type": "text"
					},
					{
						"key": "file",
						"value": "",
						"type": "text",
						"disabled": true
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "file",
							"type": "file",
							"src": []
						}
					],
					"options": {}
				},
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/documents/bankstatements",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"documents",
						"bankstatements"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get KYC documents Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "79951db6-01b8-4263-80cc-c6d2c7a4216d",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/documents",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"documents"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Payment Data",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "e1431eca-e95d-4533-9689-903bbf17f318",
						"exec": [
							"\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/documents/paymentdata",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"documents",
						"paymentdata"
					]
				}
			},
			"response": []
		},
		{
			"name": "Payment Data*",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "a16f7bce-1cca-4d2a-bcd8-4ca7599c0668",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "multipart/form-data",
						"type": "text"
					},
					{
						"key": "file",
						"value": "",
						"type": "text",
						"disabled": true
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "file",
							"type": "file",
							"src": []
						}
					],
					"options": {}
				},
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/documents/paymentdata",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"documents",
						"paymentdata"
					]
				}
			},
			"response": []
		},
		{
			"name": "Payment Gateway",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "a16f7bce-1cca-4d2a-bcd8-4ca7599c0668",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"type": "text",
						"value": "application/json"
					},
					{
						"key": "file",
						"type": "text",
						"value": "",
						"disabled": true
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"gatewayName\": \"amex\"\n}",
					"options": {}
				},
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/paymentgateways",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"paymentgateways"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Payment Data Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "e1431eca-e95d-4533-9689-903bbf17f318",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/documents/paymentdata",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"documents",
						"paymentdata"
					]
				}
			},
			"response": []
		},
		{
			"name": "Submit stage 1",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "4c70021b-697c-4146-b1c1-0e188042a51b",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {}
				},
				"url": {
					"raw": "https://{{host}}.youlendapi.com/onboarding/Leads/{{leadId}}/submitonboarding",
					"protocol": "https",
					"host": [
						"{{host}}",
						"youlendapi",
						"com"
					],
					"path": [
						"onboarding",
						"Leads",
						"{{leadId}}",
						"submitonboarding"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik0wUXdOMEl5TnpRMVJrRXhNa1pGTlVWRU5UQTJRalV6UWtRMVJUY3dORE0xUVVVM05rTkVRZyJ9.eyJodHRwOi8veW91bGVuZC5jb20vY2xhaW1zL2xlbmRpbmdQYXJ0bmVySWQiOiIyYjhiN2ZkMC1lNjJiLTQ2ZGYtYjc1ZC1jNjk1MzhkZTc5ZDciLCJpc3MiOiJodHRwczovL3lvdWxlbmQtc3RhZy5ldS5hdXRoMC5jb20vIiwic3ViIjoiekE5cXdiYkJaZ2k5TThsdmhzbkpMNFViejVCcWk0UGJAY2xpZW50cyIsImF1ZCI6Imh0dHBzOi8vc3RhZ2luZy55b3VsZW5kYXBpLmNvbS9vbmJvYXJkaW5nIiwiaWF0IjoxNTkzNjAzMTM4LCJleHAiOjE1OTM2ODk1MzgsImF6cCI6InpBOXF3YmJCWmdpOU04bHZoc25KTDRVYno1QnFpNFBiIiwiZ3R5IjoiY2xpZW50LWNyZWRlbnRpYWxzIn0.SunkbXkGafeVuI0VeaPAdgyJAHBePij329AjCpWvmRlAboi6RjPV8TqsnPMHeNTGM5T16PwbMKPCrSDN_J8hOhdD_PNoHfBPYT6vSBaghL11tP0qSZs0qkN5sIJz0h4H2ZBvzhGgt6p4sE0wCULvPI19rShYdQrvgx_45TUxd-j35OefeujZ0AkLJItrnkfPhnrsPDKc57qi55kkF8lCTBDf4_Pchh595rf1NRV3JOFKNuiSzXUQOBL6NXLIcHkoQFwCMJ1Vg8NGP9GZ-adhze2MQmE8xF3y1pjMwfJgmIeEwJfmI13aQ7R5n44FtJeFVGX5ESmzqKaDjxXfv1eKiQ",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "3e45c970-823b-454a-9cd9-a83a3c5e5045",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "40894ddf-4f9b-4f89-a45c-bf41fb93f9a1",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "5e554889-5876-4027-acf5-6deb2f6f2fb2",
			"key": "leadId",
			"value": ""
		},
		{
			"id": "4b5f27c8-4c88-4b2e-b4c4-c52d93663da0",
			"key": "significantPersonId",
			"value": ""
		},
		{
			"id": "4482047e-75ce-4919-ae32-bf21c6c46ad1",
			"key": "host",
			"value": "staging"
		},
		{
			"id": "36d576ea-e270-4892-878d-407f41e6c385",
			"value": ""
		}
	],
	"protocolProfileBehavior": {}
}